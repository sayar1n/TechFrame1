# План тестирования системы управления дефектами

## 1. Введение

Данный документ описывает план тестирования монолитного веб-приложения для централизованного управления дефектами на строительных объектах. Целью тестирования является обеспечение качества, стабильности, безопасности и соответствия системы заявленным функциональным и нефункциональным требованиям.

## 2. Объекты тестирования

*   **Фронтенд:** Веб-интерфейс, реализованный на Next.js с использованием SCSS.
*   **Бэкенд:** RESTful API, реализованный на FastAPI с Python.
*   **База данных:** SQLite, взаимодействующая через SQLAlchemy ORM.

## 3. Стратегия тестирования

Будет применяться многоуровневая стратегия тестирования, включающая:

*   **Модульное тестирование (Unit Testing):** Проверка отдельных компонентов (функций, классов) Frontend и Backend на корректность их работы в изоляции.
*   **Интеграционное тестирование (Integration Testing):** Проверка взаимодействия между различными модулями и компонентами системы (например, Frontend-Backend API, Backend-Database).
*   **Системное тестирование (System Testing):** Комплексная проверка всей системы на соответствие функциональным и нефункциональным требованиям.
*   **Приемочное тестирование (Acceptance Testing):** Проверка системы на соответствие ожиданиям пользователей (User Stories).
*   **Нагрузочное тестирование (Load Testing):** Оценка производительности системы под различными нагрузками.
*   **Тестирование безопасности (Security Testing):** Проверка системы на наличие уязвимостей и соблюдение политик безопасности.
*   **Регрессионное тестирование (Regression Testing):** Повторное выполнение тестов после внесения изменений для выявления новых дефектов или рецидивов старых.

## 4. Виды тестирования и охват

### 4.1. Модульное тестирование

*   **Цель:** Проверка корректности работы отдельных функций и методов в изоляции.
*   **Охват:**
    *   **Backend:** Функции `crud.py`, утилиты для хеширования паролей, вспомогательные функции для JWT.
    *   **Frontend:** Вспомогательные функции API-клиентов (`auth.ts`), компоненты UI без состояния (чистые функции).
*   **Инструменты:** `pytest` для Python, `Jest` или `React Testing Library` для Next.js (позже).
*   **Минимум:** ≥ 5 юнит-тестов (для Backend).

### 4.2. Интеграционное тестирование

*   **Цель:** Проверка взаимодействия между компонентами (Backend API с БД, Frontend с Backend API).
*   **Охват:**
    *   **Backend-Database:** Проверка CRUD-операций через FastAPI-эндпоинты.
    *   **Frontend-Backend:** Проверка потоков аутентификации (регистрация, вход, получение профиля), создание/управление проектами и дефектами через UI.
*   **Инструменты:** `pytest` с `TestClient` FastAPI для Backend, `Cypress` или `Playwright` для сквозного тестирования Frontend (позже).
*   **Минимум:** ≥ 2 интеграционных сценария.

### 4.3. Системное тестирование

*   **Цель:** Проверка соответствия всей системы функциональным и нефункциональным требованиям.
*   **Охват:** Все функциональные требования (FT-001 - FT-023) и нефункциональные требования (NFT-001 - NFT-009) из SRS.
*   **Сценарии:** Полный цикл работы с дефектами, управление пользователями, проектами, отчетность.

### 4.4. Приемочное тестирование (User Stories)

*   **Цель:** Подтверждение того, что система удовлетворяет бизнес-требованиям и ожиданиям пользователей.
*   **Охват:** Все определенные User Stories.
*   **Метод:** Ручное тестирование или автоматизация с помощью Cypress/Playwright на основе сценариев User Stories.

### 4.5. Нагрузочное тестирование

*   **Цель:** Оценка производительности системы при высокой нагрузке.
*   **Метрики:** Время отклика страниц, пропускная способность, использование ресурсов.
*   **Инструменты:** `Locust` (для Backend) или аналогичные.
*   **Критерии:** Время отклика страницы ≤ 1 секунды для 50 активных пользователей.

### 4.6. Тестирование безопасности

*   **Цель:** Выявление уязвимостей.
*   **Охват:** Аутентификация, авторизация, обработка ввода данных, хранение паролей, CORS-политики.
*   **Метод:** Ручная проверка, автоматизированные сканеры (позже).

### 4.7. Регрессионное тестирование

*   **Цель:** Убедиться, что новые изменения не привели к появлению ошибок в ранее работающем функционале.
*   **Охват:** Набор критических модульных и интеграционных тестов, выполняемых после каждого значимого изменения.

## 5. Контроль покрытия кода тестами

*   **Цель:** Измерение доли исходного кода, которая была выполнена при прогоне тестов.
*   **Инструменты:** `coverage.py` для Python, `nyc` или встроенные средства `Jest` для JavaScript (позже).
*   **Критерии:** Стремление к высокому покрытию, особенно для критических модулей.

## 6. Роли и обязанности

*   **Разработчики:** Разработка модульных тестов, исправление обнаруженных дефектов.
*   **Тестировщики (или Разработчики/Менеджеры):** Разработка интеграционных и системных тестов, проведение приемочного и нагрузочного тестирования, регрессионное тестирование.

## 7. Отчетность и метрики

*   Количество пройденных/проваленных тестов.
*   Покрытие кода тестами.
*   Время отклика при нагрузочном тестировании.
*   Количество и статус дефектов.

## 8. Окружение для тестирования

*   **Разработка:** Локальные машины разработчиков.
*   **Интеграция/Системное:** Отдельное тестовое окружение, максимально приближенное к продакшену.

## 9. Завершение тестирования

Тестирование считается завершенным, когда:

*   Все критические и основные дефекты исправлены и верифицированы.
*   Покрытие кода тестами соответствует заданным критериям.
*   Система успешно прошла нагрузочное тестирование.
*   Пользовательские истории подтверждены приемочным тестированием.
