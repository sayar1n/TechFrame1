# Спецификация требований к программному обеспечению (SRS)

## 1. Введение

### 1.1 Цель
Целью данного документа является подробное описание функциональных и нефункциональных требований к монолитному веб-приложению для централизованного управления дефектами на строительных объектах ООО «СистемаКонтроля». Этот документ служит основой для проектирования, разработки, тестирования и внедрения системы.

### 1.2 Область применения
Система будет обеспечивать полный цикл работы с дефектами, начиная от их регистрации и назначения ответственных лиц, до контроля статусов и формирования отчетности для руководства. Система предназначена для инженеров, менеджеров, руководителей и заказчиков.

### 1.3 Определения, акронимы и сокращения
*   **Дефект:** Обнаруженная проблема или несоответствие на строительном объекте.
*   **Проект/Объект:** Строительный объект или его этап, в рамках которого ведется учет дефектов.
*   **Инженер:** Пользователь, ответственный за регистрацию дефектов и обновление их информации.
*   **Менеджер:** Пользователь, ответственный за назначение задач, контроль сроков и формирование отчётов.
*   **Наблюдатель (Руководитель/Заказчик):** Пользователь, имеющий доступ к просмотру прогресса и отчетности, но без возможности изменения данных.
*   **SRS:** Software Requirements Specification (Спецификация требований к программному обеспечению).
*   **JWT:** JSON Web Token.
*   **CRUD:** Create, Read, Update, Delete.

### 1.4 Ссылки
*   Техническое задание (предоставлено пользователем).
*   Use Case сценарии (docs/analysis/use_cases.md).
*   User Stories (docs/analysis/user_stories.md).

## 2. Общее описание

### 2.1 Перспективы продукта
Система является монолитным веб-приложением, разработанным для централизованного управления дефектами на строительных объектах. Она будет интегрирована с существующей IT-инфраструктурой заказчика и станет основным инструментом для взаимодействия между всеми участниками процесса управления дефектами.

### 2.2 Функции продукта
Основные функции системы включают: управление пользователями (регистрация, аутентификация, разграничение прав доступа), управление проектами, управление дефектами (создание, редактирование, изменение статусов, комментарии, вложения), и формирование отчетности.

### 2.3 Роли пользователей и характеристики
*   **Менеджер:** Полный доступ к управлению проектами и дефектами, включая создание, редактирование, удаление. Имеет доступ к отчетам и аналитике. Может назначать исполнителей и контролировать сроки.
*   **Инженер:** Может регистрировать новые дефекты, обновлять информацию по назначенным ему дефектам, изменять статус дефектов на "В работе" и "На проверке", добавлять комментарии и вложения. Имеет доступ к просмотру проектов и дефектов.
*   **Наблюдатель (Руководитель/Заказчик):** Имеет доступ только к просмотру проектов, дефектов, комментариев, вложений и отчетов. Не имеет прав на изменение данных.

### 2.4 Общие ограничения
*   Система должна быть монолитной.
*   БД: SQLite.
*   Backend: FastAPI.
*   Frontend: Next.js + SCSS.
*   Интерфейс на русском языке.
*   Совместимость с Chrome/Firefox/Edge последних версий.

## 3. Функциональные требования

### 3.1 Управление пользователями и аутентификация
*   **ФТ-001: Регистрация пользователей.** Система должна предоставлять возможность регистрации новых пользователей с указанием имени пользователя, email и пароля.
*   **ФТ-002: Аутентификация пользователей.** Система должна обеспечивать безопасную аутентификацию пользователей по имени пользователя/email и паролю, выдавая JWT-токен.
*   **ФТ-003: Разграничение прав доступа.** Система должна разграничивать права доступа на основе ролей: "менеджер", "инженер", "наблюдатель".

### 3.2 Управление проектами/объектами
*   **ФТ-004: Создание проектов.** Система должна позволять менеджерам создавать новые строительные проекты (название, описание).
*   **ФТ-005: Редактирование проектов.** Система должна позволять менеджерам редактировать информацию о проектах.
*   **ФТ-006: Просмотр проектов.** Система должна позволять всем аутентифицированным пользователям просматривать список проектов и их детали.
*   **ФТ-007: Удаление проектов.** Система должна позволять менеджерам удалять проекты.

### 3.3 Управление дефектами
*   **ФТ-008: Создание дефектов.** Система должна позволять инженерам и менеджерам создавать новые дефекты в рамках проекта (заголовок, описание, приоритет, исполнитель, сроки, возможность прикрепления вложений).
*   **ФТ-009: Редактирование дефектов.** Система должна позволять инженерам (репортерам, исполнителям) и менеджерам редактировать информацию о дефектах.
*   **ФТ-010: Управление статусами дефектов.** Система должна поддерживать следующие статусы дефектов: "Новая" → "В работе" → "На проверке" → "Закрыта"/"Отменена".
*   **ФТ-011: Просмотр дефектов.** Система должна позволять всем аутентифицированным пользователям просматривать список дефектов и их детали.
*   **ФТ-012: Поиск, сортировка и фильтрация дефектов.** Система должна предоставлять функционал поиска, сортировки и фильтрации дефектов по различным критериям (проект, статус, приоритет, исполнитель, репортер, даты создания/срока выполнения, текстовый поиск).
*   **ФТ-013: Ведение истории изменений дефектов.** Система должна автоматически сохранять историю изменений дефекта (кто, что и когда изменил).
*   **ФТ-014: Удаление дефектов.** Система должна позволять менеджерам и репортерам дефектов удалять дефекты.

### 3.4 Управление комментариями и вложениями
*   **ФТ-015: Добавление комментариев.** Система должна позволять всем аутентифицированным пользователям добавлять комментарии к дефектам.
*   **ФТ-016: Просмотр комментариев.** Система должна позволять всем аутентифицированным пользователям просматривать комментарии к дефектам.
*   **ФТ-017: Редактирование комментариев.** Система должна позволять авторам комментариев и менеджерам редактировать комментарии.
*   **ФТ-018: Удаление комментариев.** Система должна позволять авторам комментариев и менеджерам удалять комментарии.
*   **ФТ-019: Добавление вложений.** Система должна позволять инженерам и менеджерам прикреплять файлы (фото, документы) к дефектам.
*   **ФТ-020: Просмотр вложений.** Система должна позволять всем аутентифицированным пользователям просматривать вложения к дефектам.
*   **ФТ-021: Удаление вложений.** Система должна позволять авторам вложений и менеджерам удалять вложения.

### 3.5 Отчетность и аналитика
*   **ФТ-022: Экспорт отчетности.** Система должна предоставлять менеджерам и наблюдателям возможность экспорта отчетов по дефектам в форматах CSV/Excel.
*   **ФТ-023: Просмотр аналитических отчетов.** Система должна предоставлять менеджерам и наблюдателям доступ к просмотру аналитических отчетов (графики, статистика) по дефектам и проектам.

## 4. Нефункциональные требования

### 4.1 Производительность
*   **НФТ-001: Время отклика.** Время отклика страницы не должно превышать 1 секунды для 50 активных пользователей.

### 4.2 Безопасность
*   **НФТ-002: Хранение паролей.** Пароли пользователей должны храниться в зашифрованном виде с использованием алгоритмов bcrypt или argon2.
*   **НФТ-003: Защита от уязвимостей.** Система должна быть защищена от распространенных веб-уязвимостей, таких как SQL-инъекции, XSS (Cross-Site Scripting) и CSRF (Cross-Site Request Forgery).
*   **НФТ-004: Логирование.** Система должна вести логирование всех значимых действий пользователей и системных событий.
*   **НФТ-005: Контроль доступа к логам.** Доступ к логам должен быть строго ограничен и контролироваться.

### 4.3 Надежность
*   **НФТ-006: Резервное копирование БД.** Должно быть обеспечено автоматическое резервное копирование базы данных не реже одного раза в сутки.

### 4.4 Удобство использования
*   **НФТ-007: Язык интерфейса.** Интерфейс системы должен быть полностью на русском языке.
*   **НФТ-008: Адаптивность.** Интерфейс системы должен быть адаптивным и корректно отображаться на различных устройствах (ПК, планшеты).
*   **НФТ-009: Совместимость с браузерами.** Система должна быть совместима с последними версиями браузеров Chrome, Firefox и Edge.

## 5. Другие требования

### 5.1 Технологии
*   **Backend:** FastAPI (Python).
*   **Frontend:** Next.js (React) с использованием SCSS.
*   **База данных:** SQLite.
